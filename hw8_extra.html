<!DOCTYPE html>
<html lang="en">

<head> 
<meta charset="utf-8">
<meta name="description" content="Exercise 1 miscellaneous using classname">
<title>Homework8-Extra Credit</title>

<body>

    <h1>getting quotes</h1>
    <p id="quotes"></p>
    <p id="updated_at"></p>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            let symbol = 'amzn';
            let callback = function (data) {
                let strPrice = data.price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
                // From https://stackoverflow.com/questions/149055/how-can-i-format-numbers-as-currency-string-in-javascript

                document.getElementById('quotes').textContent = data.symbol + ": $" + strPrice;
                document.getElementById('updated_at').textContent = data.updated_at + '(UTC)';
                alert('Stock Price: $' + strPrice + ' at ' + data.updated_at + '(UTC)');
            };

            // https://financialmodelingprep.com/developer/docs/realtime-stock-quote-api
            let url = "https://financialmodelingprep.com/api/v3/search-name?query=" + symbol;
            $.getJSON(url, callback);
        });
    </script>
</body>
</head>

<footer>
        <p> <a href="hw8.html">Return to Chapter 8 index page</a></p>

</footer>


</html>
<!DOCTYPE html>
<html>

<head> 
<meta charset="utf-8">
<link rel="stylesheet" href="hw.css">
<title>Homework8-extra</title>



<body>

<h2>Geolocation</h2>
<br><br>
<h3>Click the button to get your coordinates.</h3>

<br>
<button onclick="getLocation()">Try It</button>
<br><br>
<h3 id="demo"></h3>
<br>

<script>
const x = document.getElementById("demo");

function getLocation() {
  try {
    navigator.geolocation.getCurrentPosition(showPosition);
  } catch {
    x.innerHTML = err;
  }
}

function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude + 
  "<br>Longitude: " + position.coords.longitude;
}

</script>


<script>
const xhr = new XMLHttpRequest();

xhr.open("GET","https://api.openweathermap.org/data/3.0/onecall?lat=" + position.coords.latitude + "&lon=" + position.coords.longitude + "&appid={667cfc6dbdcc95d28a821ebcee08126b}" );
xhr.send();
xhr.responseType = "json";
xhr.onload = () => {
  if (xhr. readyState== 4 && xhr.status == 200) {
    const data = xhr.response;
    console.log(data);
  } else {
    console.log(`Error: ${xhr.status}`);
  }
}

</script>


</body>

<br><br>
<footer>
        <p> <a href="hw8.html">Return to Chapter 8 index page</a></p>

</footer>



</html>

